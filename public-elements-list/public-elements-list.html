<link rel="import" href="../../polymer/polymer-element.html">
<link rel="import" href="../../paper-card/paper-card.html">
<link rel="import" href="../../iron-image/iron-image.html">
<link rel="import" href="../../paper-button/paper-button.html">
<link rel="import" href="../public-elements-card/public-elements-card.html">

<dom-module id="public-elements-list">
  <template>
    <style>
      :host {
        display: block;
        position: relative;
      }
      .results {
        -moz-column-width: 14em;
        -webkit-column-width: 14em;
        column-width: 14em;
        -moz-column-gap: 1em;
        -webkit-column-gap: 1em;
        column-gap: 1em;
        padding: 10px;
      }
    </style>
    <public-elements-service id="ajax"
      service="{{service}}"  result="{{result}}" params="{{params}}"
      method="{{method}}"  body="{{body}}" error="{{error}}">
    </public-elements-service>
    <div class="results">
      <template is="dom-repeat" items="{{resultItems}}">
        <public-elements-card card-item="{{item}}"
          on-show-item="presentShow"
          on-edit-item="presentEditForm">
        </public-elements-card>
      </template>
    </div>
  </template>
  <script>
    /**
     * `public-elements-list`
     *
     *
     * @customElement
     * @polymer
     * @demo demo/index.html
     */
    class PublicElementsList extends Polymer.Element {
      static get is() {
        return 'public-elements-list';
      }
      static get properties() {
        return {
          project: {
            type: Object,
          },
          resultItems: [],
          service: {
            value: `projects/59cabbdd4f1fc407201d1ffc/pubitems`,
            observer: 'generateRequest'
          },
          result: {
            observer: 'animateItems'
          }
        };
      }

      connectedCallback() {
        super.connectedCallback();
      }

      animateItems(result) {
        this.resultItems = result;
        console.log(result);
      }

      generateRequest() {
        if (!this.service) return;
        this.$.ajax.generateRequest();
      }
    }

    window.customElements.define(PublicElementsList.is, PublicElementsList);
  </script>
</dom-module>
